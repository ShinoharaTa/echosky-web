# Echosky ページ詳細仕様書

## 概要

各ページのデザイン、挙動、UX、技術的な実装詳細を定義する。
フロントエンド実装時の指針となる詳細仕様。

---

## 1. ログインページ (`/login`)

### 基本情報
- **目的**: ATProtoアカウントでのログイン
- **対象ユーザー**: 未ログインユーザー
- **認証**: 不要

### デザイン仕様

#### レイアウト
- **中央配置**: 画面中央にログインカードを配置
- **カードサイズ**: 最大幅400px、レスポンシブ対応
- **背景**: グラデーション背景（gray-50 to gray-100）

#### ビジュアル要素
```
┌─────────────────────────────────────┐
│           [ロゴアイコン]              │
│        Echoskyにログイン             │
│    ATProto掲示板システムへようこそ    │
│                                   │
│  ATProtoサービス: [_______________]  │
│  ユーザー名/メール: [_____________]   │
│  パスワード: [___________________]   │
│                                   │
│         [ログイン ボタン]            │
└─────────────────────────────────────┘
```

#### カラーパレット
- **プライマリ**: Blue-600 (#2563eb)
- **カード背景**: White/Gray-800 (ダークモード)
- **テキスト**: Gray-900/Gray-100
- **入力フィールド**: Gray-50 border Gray-300

#### タイポグラフィ
- **タイトル**: 2xl (24px), font-bold
- **サブタイトル**: sm (14px), text-gray-600
- **ラベル**: sm (14px), font-medium
- **ボタン**: base (16px), font-medium

### 挙動・インタラクション

#### フォームバリデーション
- **必須チェック**: 全フィールド入力必須
- **リアルタイム**: フォーカスアウト時にバリデーション
- **エラー表示**: 赤いボーダー + エラーメッセージ

#### ローディング状態
- **ボタン**: スピナー + "ログイン中..." テキスト
- **フィールド**: ログイン中は無効化
- **時間**: 最大10秒でタイムアウト

#### エラーハンドリング
- **認証エラー**: "ログインに失敗しました。認証情報を確認してください。"
- **ネットワークエラー**: "接続に失敗しました。しばらく後にお試しください。"
- **エラー表示**: 赤背景のアラートボックス

#### 成功時の挙動
- **リダイレクト**: `/` (ホームページ) に即座に遷移
- **セッション保存**: localStorage に認証情報保存

### アクセシビリティ
- **キーボード操作**: Tab順序、Enter送信対応
- **スクリーンリーダー**: 適切なlabel、role属性
- **コントラスト**: WCAG AA準拠 (4.5:1以上)

### レスポンシブ対応
- **モバイル**: カード幅90%、パディング調整
- **タブレット**: カード幅70%
- **デスクトップ**: カード幅400px固定

---

## 2. ホームページ (`/`)

### 基本情報
- **目的**: ボード一覧表示・新規スレッド作成
- **対象ユーザー**: ログイン済みユーザー
- **認証**: 必須（未ログイン時は `/login` にリダイレクト）

### デザイン仕様

#### レイアウト構造

**PC (2カラム)**
```
┌─────────────────────────────────────┐
│          [ヘッダー情報]              │
│    Echosky ホーム | ユーザー情報      │
│                                   │
│  ボード一覧 (4 ボード)    [更新ボタン] │
│  ┌─────────────┐ ┌─────────────┐    │
│  │ 💬 雑談      │ │ 🔧 技術      │    │
│  │ 5スレッド    │ │ 12スレッド   │    │
│  └─────────────┘ └─────────────┘    │
│  ┌─────────────┐ ┌─────────────┐    │
│  │ 📰 ニュース   │ │ 🎮 ゲーム    │    │
│  │ 3スレッド    │ │ 8スレッド    │    │
│  └─────────────┘ └─────────────┘    │
│                                   │
│         [新規ボード作成]             │
│  ボード名: [___________________]     │
│            [ボード作成]              │
└─────────────────────────────────────┘
```

**スマホ (1カラム・幅広)**
```
┌─────────────────────────────────────┐
│          [ヘッダー情報]              │
│    Echosky ホーム | ユーザー情報      │
│                                   │
│  ボード一覧 (4 ボード)    [更新ボタン] │
│  ┌─────────────────────────────────┐  │
│  │ 💬 雑談                5スレッド │  │
│  └─────────────────────────────────┘  │
│  ┌─────────────────────────────────┐  │
│  │ 🔧 技術               12スレッド │  │
│  └─────────────────────────────────┘  │
│  ┌─────────────────────────────────┐  │
│  │ 📰 ニュース            3スレッド │  │
│  └─────────────────────────────────┘  │
│  ┌─────────────────────────────────┐  │
│  │ 🎮 ゲーム              8スレッド │  │
│  └─────────────────────────────────┘  │
│                                   │
│         [新規ボード作成]             │
│  ボード名: [___________________]     │
│            [ボード作成]              │
└─────────────────────────────────────┘
```

#### ボードカードデザイン
- **サイズ**: 幅100%(モバイル)、最小300px幅(PC)、高さ120px
- **ホバー効果**: scale(1.02) + shadow-lg
- **アイコン**: ボード名の頭文字をグラデーション円内に表示
- **情報表示**: ボード名 + スレッド数
- **グリッド**: 1列(モバイル・幅広) → 2列(PC)

#### カラースキーム
- **ボードアイコン**: Blue-500 to Purple-600 グラデーション
- **カードホバー**: shadow-lg, transform scale-105
- **作成フォーム**: Green-100 背景, Green-600 アイコン

### 挙動・インタラクション

#### データ読み込み
- **初期読み込み**: ローディングスピナー表示
- **エラー時**: "データの読み込みに失敗しました" + 再試行ボタン
- **空状態**: "ボードがありません" + 作成を促すメッセージ

#### ボード操作
- **クリック**: `/c/{ボード名}` に遷移
- **ホバー**: カードが浮き上がるアニメーション
- **スレッド数**: リアルタイム更新（作成後）

#### ボード作成
- **バリデーション**: ボード名必須、重複チェック
- **作成中**: ボタンにスピナー表示
- **成功時**: 作成したボードページ(`/c/{ボード名}`)に遷移
- **エラー時**: エラーメッセージ表示（重複時は "既に存在するボード名です"）

### パフォーマンス要件
- **初期読み込み**: 3秒以内
- **ボード数取得**: 並列処理で効率化
- **キャッシュ**: 5分間のデータキャッシュ

---

## 3. コミュニティ詳細ページ (`/c/[c]`)

### 基本情報
- **目的**: 特定ボードのスレッド一覧表示・新規スレッド作成
- **対象ユーザー**: ログイン済みユーザー
- **認証**: 必須

### デザイン仕様

#### ヘッダー部分
```
┌─────────────────────────────────────┐
│ [←戻る]  📋 雑談ボード               │
│          15 スレッド                │
└─────────────────────────────────────┘
```

#### スレッド一覧
```
┌─────────────────────────────────────┐
│ 💬 今日の天気について                │
│    2時間前 • 5投稿                  │
│    最新: "晴れていて気持ちいいですね"  │
├─────────────────────────────────────┤
│ 💬 おすすめの本教えて                │
│    1日前 • 12投稿                   │
│    最新: "村上春樹の新作読みました"   │
└─────────────────────────────────────┘
```

#### 新規スレッド作成フォーム
- **位置**: ページ下部の固定フォーム
- **デザイン**: Green系のアクセントカラー
- **フィールド**: タイトルのみ（ボード名は自動設定）

### 挙動・インタラクション

#### ナビゲーション
- **戻るボタン**: ホームページ (`/`) に遷移
- **パンくず**: ホーム > ボード名

#### スレッド表示
- **ソート**: 最新更新順（最新投稿があったスレッドが上）
- **情報表示**: 作成日時、投稿数、最新投稿プレビュー
- **クリック**: `/t/{スレッドURI}` に遷移

#### リアルタイム更新
- **新規スレッド**: 作成後即座に一覧に反映
- **投稿数更新**: 他ページでの投稿も反映（定期ポーリング）

### 空状態
- **スレッドなし**: "このボードにはまだスレッドがありません" + 作成を促すCTA
- **アイコン**: 大きなメッセージボックスアイコン

---

## 4. スレッド詳細ページ (`/t/[t]`)

### 基本情報
- **目的**: スレッド内の投稿表示・新規投稿・リアクション
- **対象ユーザー**: ログイン済みユーザー
- **認証**: 必須

### デザイン仕様

#### スレッドヘッダー
```
┌─────────────────────────────────────┐
│ [←戻る]  💬 今日の天気について        │
│          雑談ボード • 2時間前作成     │
└─────────────────────────────────────┘
```

#### 投稿一覧
```
┌─────────────────────────────────────┐
│ #1 👤 user1.bsky.social             │
│    2時間前                          │
│    今日はとても良い天気ですね！       │
│    皆さんの地域はいかがですか？       │
│                                   │
│    👍 3  😊 1  ⭐ 2               │
├─────────────────────────────────────┤
│ #2 👤 user2.bsky.social             │
│    1時間前                          │
│    こちらも晴れています☀️             │
│    散歩日和ですね                   │
│                                   │
│    👍 2  😊 3                      │
└─────────────────────────────────────┘
```

#### 投稿フォーム（下部固定）
```
┌─────────────────────────────────────┐
│ 💬 投稿を追加...                    │
│ [テキストエリア（複数行）]            │
│                        [投稿] ボタン │
└─────────────────────────────────────┘
```

### 挙動・インタラクション

#### 投稿表示
- **番号付け**: #1, #2, #3... の連番表示
- **ユーザー情報**: ハンドル名 + アバター（将来実装）
- **時刻表示**: 相対時間（"2時間前"、"1日前"）
- **本文**: 改行・メンション・リンクの適切な表示

#### リアクション機能
- **種類**: 👍 Like, 😊 Laugh, 😢 Sad, 😠 Angry, ⭐ Star
- **表示**: アイコン + 数量
- **操作**: クリックでON/OFF切り替え
- **視覚フィードバック**: 自分のリアクションは濃い色で表示

#### 投稿作成
- **下書き保存**: localStorage に自動保存
- **文字カウント**: 最大文字数表示（制限なし）
- **送信**: Ctrl+Enter または送信ボタン
- **成功時**: フォームクリア + 一覧更新

#### スクロール挙動
- **新規投稿時**: 最下部にスムーズスクロール
- **読み込み時**: 最新投稿が見える位置にスクロール

### パフォーマンス
- **仮想化**: 投稿数が多い場合の仮想スクロール
- **画像遅延読み込み**: 画像の lazy loading
- **差分更新**: 新規投稿のみを追加表示

---

## 5. 法的ページ (`/terms`, `/privacy`)

### 基本情報
- **目的**: 利用規約・プライバシーポリシーの表示
- **対象ユーザー**: 全ユーザー
- **認証**: 不要

### デザイン仕様

#### レイアウト
- **最大幅**: 4xl (896px)
- **中央配置**: コンテンツを中央に配置
- **余白**: 上下に十分な padding

#### タイポグラフィ
- **タイトル**: 3xl (30px), font-bold
- **セクション見出し**: 2xl (24px), font-semibold
- **本文**: lg (18px), 行間1.7
- **リスト**: 適切なインデント・マーカー

#### カラー
- **背景**: White/Gray-900
- **テキスト**: Gray-900/Gray-100
- **見出し**: 通常テキストと同色
- **リンク**: Blue-600, hover時 Blue-800

---

## 共通仕様

### ダークモード対応
- **自動検出**: system preference に従う
- **色調**: Gray-900 ベース背景
- **コントラスト**: 十分な視認性確保

### レスポンシブ対応
- **ブレイクポイント**: 
  - sm: 640px (モバイル)
  - md: 768px (タブレット) 
  - lg: 1024px (デスクトップ)
- **グリッド**: 各画面サイズで最適なレイアウト

### アニメーション
- **トランジション**: 200ms ease-in-out
- **ホバー効果**: transform, shadow の変化
- **ローディング**: スピナー、スケルトン UI

### エラーハンドリング
- **ネットワークエラー**: 統一されたエラーメッセージ
- **再試行**: 自動リトライ + 手動再試行ボタン
- **フォールバック**: 最低限の機能は常に動作

### アクセシビリティ
- **キーボード操作**: 全機能をキーボードで操作可能
- **スクリーンリーダー**: 適切な見出し構造、alt text
- **フォーカス管理**: 明確なフォーカスインジケーター
- **カラーコントラスト**: WCAG AA準拠

---

## 実装優先度

### Phase 1: 基盤UI改善
1. **ローディング状態の統一化**
2. **エラー表示の統一化** 
3. **レスポンシブ対応の強化**

### Phase 2: UX向上
1. **アニメーション・トランジション追加**
2. **リアルタイム更新機能**
3. **下書き保存機能**

### Phase 3: 高度な機能
1. **仮想スクロール実装**
2. **プッシュ通知**
3. **オフライン対応**

この詳細仕様書に基づいて実装を進めることで、一貫性のある高品質なUIを構築できます。どのページから詳細実装を始めますか？
