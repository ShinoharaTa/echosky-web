# Echosky ページ構成とコンポーネント設計

## 現在の実装状況

### ページ一覧

| ページ | パス | 実装状況 | 説明 |
|--------|------|----------|------|
| **認証** |
| ログインページ | `/login` | ✅ 完了 | パスワード認証でのログイン |
| **メイン機能** |
| ホームページ | `/` | ✅ 完了 | ボード一覧・新規スレッド作成 |
| コミュニティ詳細 | `/c/[c]` | ✅ 完了 | 特定ボードのスレッド一覧・新規スレッド作成 |
| スレッド詳細 | `/t/[t]` | ✅ 完了 | スレッド内の投稿一覧・新規投稿・リアクション |
| **法的ページ** |
| 利用規約 | `/terms` | ✅ 完了 | 利用規約の表示 |
| プライバシーポリシー | `/privacy` | ✅ 完了 | プライバシーポリシーの表示 |

### レイアウト構造

```
+layout.svelte (グローバル)
├── ヘッダー（ナビゲーション・ログアウト）
├── メインコンテンツ
└── フッター

home/+layout.svelte (認証済みエリア)
├── 認証チェック
└── 子ページ
```

## 必要なコンポーネント設計

### 1. 共通コンポーネント

#### 1.1 UI基盤コンポーネント

```typescript
// src/lib/components/ui/
```

| コンポーネント | 説明 | 優先度 | 実装状況 |
|---------------|------|--------|----------|
| `Button.svelte` | 統一されたボタンスタイル | 高 | ❌ (CSSクラスで対応中) |
| `Card.svelte` | カードレイアウト | 高 | ❌ (CSSクラスで対応中) |
| `Input.svelte` | フォーム入力フィールド | 高 | ❌ (CSSクラスで対応中) |
| `Modal.svelte` | モーダルダイアログ | 中 | ❌ 未実装 |
| `LoadingSpinner.svelte` | ローディング表示 | 高 | ❌ (インライン実装) |
| `Badge.svelte` | バッジ・タグ表示 | 低 | ❌ (CSSクラスで対応中) |

#### 1.2 ナビゲーションコンポーネント

| コンポーネント | 説明 | 優先度 | 実装状況 |
|---------------|------|--------|----------|
| `Header.svelte` | グローバルヘッダー | 高 | ✅ (+layout.svelteに統合) |
| `Breadcrumb.svelte` | パンくずナビ | 中 | ❌ 未実装 |
| `Sidebar.svelte` | サイドバーナビ | 低 | ❌ 未実装 |

### 2. 機能別コンポーネント

#### 2.1 認証関連

```typescript
// src/lib/components/auth/
```

| コンポーネント | 説明 | 優先度 | 実装状況 |
|---------------|------|--------|----------|
| `LoginForm.svelte` | ログインフォーム | 高 | ✅ (+page.svelteに統合) |
| `UserProfile.svelte` | ユーザー情報表示 | 中 | ❌ 未実装 |
| `LogoutButton.svelte` | ログアウトボタン | 高 | ✅ (+layout.svelteに統合) |

#### 2.2 ボード・コミュニティ関連

```typescript
// src/lib/components/board/
```

| コンポーネント | 説明 | 優先度 | 実装状況 |
|---------------|------|--------|----------|
| `BoardList.svelte` | ボード一覧表示 | 高 | ✅ (home/+page.svelteに統合) |
| `BoardCard.svelte` | 個別ボードカード | 高 | ❌ (インライン実装) |
| `CreateBoardForm.svelte` | 新規ボード作成 | 低 | ❌ 未実装 |

#### 2.3 スレッド関連

```typescript
// src/lib/components/thread/
```

| コンポーネント | 説明 | 優先度 | 実装状況 |
|---------------|------|--------|----------|
| `ThreadList.svelte` | スレッド一覧表示 | 高 | ✅ (c/[c]/+page.svelteに統合) |
| `ThreadCard.svelte` | 個別スレッドカード | 高 | ❌ (インライン実装) |
| `CreateThreadForm.svelte` | 新規スレッド作成フォーム | 高 | ✅ (各ページに統合) |
| `ThreadHeader.svelte` | スレッドヘッダー情報 | 中 | ❌ (インライン実装) |

#### 2.4 投稿・レス関連

```typescript
// src/lib/components/post/
```

| コンポーネント | 説明 | 優先度 | 実装状況 |
|---------------|------|--------|----------|
| `PostList.svelte` | 投稿一覧表示 | 高 | ✅ (t/[t]/+page.svelteに統合) |
| `PostCard.svelte` | 個別投稿カード | 高 | ❌ (インライン実装) |
| `CreatePostForm.svelte` | 新規投稿フォーム | 高 | ✅ (t/[t]/+page.svelteに統合) |
| `PostReactions.svelte` | リアクション表示・操作 | 高 | ❌ (インライン実装) |
| `PostMeta.svelte` | 投稿メタ情報（日時、作者など） | 中 | ❌ (インライン実装) |

#### 2.5 検索・フィルタ関連

```typescript
// src/lib/components/search/
```

| コンポーネント | 説明 | 優先度 | 実装状況 |
|---------------|------|--------|----------|
| `SearchBar.svelte` | 検索バー | 中 | ❌ 未実装 |
| `FilterPanel.svelte` | フィルタパネル | 中 | ❌ 未実装 |
| `SearchResults.svelte` | 検索結果表示 | 中 | ❌ 未実装 |

### 3. レイアウトコンポーネント

```typescript
// src/lib/components/layout/
```

| コンポーネント | 説明 | 優先度 | 実装状況 |
|---------------|------|--------|----------|
| `PageContainer.svelte` | ページコンテナ | 高 | ❌ (CSSクラスで対応中) |
| `Section.svelte` | セクション区切り | 中 | ❌ 未実装 |
| `Grid.svelte` | グリッドレイアウト | 中 | ❌ 未実装 |

## 優先度別実装計画

### 🔴 高優先度（即座に必要）

1. **UI基盤コンポーネント**
   - `Button.svelte` - 現在CSSクラスで対応しているが、統一性向上のため
   - `Card.svelte` - 多用されているため
   - `LoadingSpinner.svelte` - 現在各所でインライン実装されている

2. **機能コンポーネント**
   - `BoardCard.svelte` - ホームページで使用
   - `ThreadCard.svelte` - コミュニティページで使用
   - `PostCard.svelte` - スレッドページで使用

### 🟡 中優先度（機能拡張時に必要）

1. **ナビゲーション強化**
   - `Breadcrumb.svelte` - UX向上のため
   - `UserProfile.svelte` - ユーザー情報表示の充実

2. **検索機能**
   - `SearchBar.svelte`
   - `FilterPanel.svelte`

### 🟢 低優先度（将来的に必要）

1. **管理機能**
   - `CreateBoardForm.svelte`
   - `Modal.svelte`
   - `Sidebar.svelte`

## コンポーネント設計原則

### 1. 責任の分離
- **表示ロジック** と **ビジネスロジック** を分離
- APIコールは親コンポーネントまたは専用ストアで処理
- コンポーネントはpropsとeventsでデータをやり取り

### 2. 再利用性
- 汎用的なpropsインターフェース
- スロットを活用した柔軟なレイアウト
- CSS変数による外部からのスタイル調整

### 3. アクセシビリティ
- 適切なARIA属性
- キーボード操作対応
- セマンティックなHTML構造

### 4. TypeScript対応
- 全コンポーネントでTypeScript使用
- 型安全なpropsとevents定義

## 次のステップ

どのコンポーネントから実装を始めますか？おすすめは以下の順序です：

1. `LoadingSpinner.svelte` - 最も汎用的で影響範囲が小さい
2. `Button.svelte` - 使用頻度が高く、統一性向上に効果的
3. `Card.svelte` - レイアウトの基盤となる
4. `BoardCard.svelte` → `ThreadCard.svelte` → `PostCard.svelte` - 機能コンポーネント

どのコンポーネントから始めるか、または別のアプローチをご希望でしょうか？
